# GPSのこと

2016/11/23

GPSモジュールの取り扱いや設置方法などいろいろ知見を得たのでメモ。

## 取付方向

GPS信号は非常に弱く、アンテナの性能や取り付け位置に大きく影響を受ける。

ベストな取り付け方はアンテナが天頂を向いていること。

```
          天頂


アンテナ    ---
地面     ========
```

地平座標で0度〜180度の衛星電波を受信することができるので、
つまりはより多くの衛星から電波を受信することが出来る。

例えばアンテナが天頂から90度ずれた形で取り付けると、
地平座標で0度〜90度までに存在する衛星からしか電波を受信できず測位精度が悪化する。

```
          天頂

            
アンテナ     |
            |
地面     ========
```

## GPSモジュールが内部で保持している情報

- 時刻
- 位置
- [エフェメリス](http://qz-vision.jaxa.jp/USE/ja/ephemeris)
- [アルマナック](http://qz-vision.jaxa.jp/USE/ja/almanac)

これらのデータはバッテリバックアップにより保持される（GPSモジュールや回路による）。
なお、エフェメリスは4時間、アルマナックは6日間という有効期限がある。

## GPSモジュール起動時の状態

以下の3つの状態のいずれかで起動する。

- コールドスタート
- ウォームスタート
- ホットスタート

### コールドスタート

GPSモジュール内に何も情報を保持していない状態で起動するとコールドスタートとなる。

### ウォームスタート

GPSモジュール内に何かしらの情報を保持している状態で起動するとウォームスタートとなる。
測位までの時間は数十秒から数分。

### ホットスタート

時刻、位置、エフェメリスおよびアルマナックを保持した状態で起動するとホットスタートとなり、測位はだいたい数秒〜数十秒で完了する。

## 測位を速くするには

GPSモジュールが必要な情報を外部から与えてあげればホットスタートとなる。

一般的には *AGPS (Assisted GPS)* と呼ばれる技術で、
スマートフォンのネットワーク回線を通じてエフェメリスやアルマナックをダウンロードしGPSモジュールに書き込めばよい。
書き込み方法はGPSモジュールにより異なる。
